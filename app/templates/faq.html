{% extends "layout.html" %}
{% block title %}FAQ {% endblock title %}

{% block content %}
<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": [{% for faq in faq_entries %}{
      "@type": "Question",
      "name": "{{ faq.title }}",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "{{ faq.content }}"
      }}{% if not loop.last %},{% endif %}{% endfor %}
    ]
  }
</script>

<div class="container px-8 py-6 mx-auto">
  <div class="flex flex-wrap justify-center">
    <div class="w-full px-4 mb-8 md:w-2/3">
      <input
        class="w-full px-4 py-3 mb-8 text-lg leading-tight text-gray-700 bg-white border border-gray-200 rounded appearance-none focus:outline-none focus:shadow-outline"
        id="faq-search" type="text" placeholder="Search FAQ">

      {% set faq_entries = [
      {"title": "Muss ich mich für meine Meldung anmelden oder registrieren?", "content": "Nein, eine Registrierung oder
      Anmeldung ist nicht nötig."},
      {"title": "Wer kann mitmachen?", "content": "Mitmachen können Kinder, Jugendliche oder Erwachsene, die Interesse
      haben, sich an diesem Forschungsprojekt zu beteiligen."},
      {"title": "Wie kann ich mitmachen?", "content": "Rufen Sie das Meldeformular auf, beginnen mit dem Hochladen eines
      Bildes... Mehr brauchen Sie nicht zu tun."},
      {"title": "Kann ich auch Gottesanbeterinnen außerhalb von Berlin und Brandenburg melden?", "content": "Ja. Der
      Fokus des Projektes liegt zwar auf Nachweisen der Gottesanbeterin in Berlin und Brandenburg..."},
      {"title": "Kann ich auch Beobachtungen aus vorherigen jahren melden?", "content": "Sehr gerne... Schauen Sie gerne
      auch Ihre Fotoarchive durch..."},
      {"title": "Wonach soll ich schauen?", "content": "Jegliche Nachweise der gut getarnten Lauerjägerin sind
      interessant..."},
      {"title": "Wo soll ich suchen?", "content": "Die Europäische Gottesanbeterin ist eine Wärme und Sonne liebende
      Art..."},
      {"title": "Muss ich etwas unternehmen, wenn ich eine Gottesanbeterin finde?", "content": "Machen Sie bitte ein
      Foto und melden Sie uns Ihren Fund..."},
      {"title": "Was passiert mit meiner Meldung?", "content": "Im Naturkundemuseum Potsdam werden die Meldungen in
      einer Datenbank erfasst..."},
      {"title": "Was passiert mit meinen Daten?", "content": "Mit dem neuen Meldeportal können Sie den Fundort direkt in
      der Karte auswählen (anklicken)..."},
      {"title": "Das passiert mit meinen Fotos?", "content": "Die Fotos dienen ausschließlich der Absicherung des
      Fundes..."}
      ] %}
      <div class="space-y-6" id="faq-container">
        {% for faq in faq_entries %}
        <div class="faq-item" data-title="{{ faq.title|lower }}">
          <div
            class="flex items-center justify-between block p-6 transition-all duration-200 ease-in bg-white border border-gray-200 rounded-lg shadow-lg cursor-pointer hover:shadow-xl faq-header"
            data-id="faq{{ loop.index }}">
            <h2
              class="text-2xl font-semibold text-green-800 transition-colors duration-200 ease-in-out hover:text-green-600">
              {{ faq.title }}</h2>
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"
              class="w-6 h-6 transition-transform duration-200 ease-in transform"
              style="transition: transform 0.3s ease;">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
            </svg>
          </div>
          <div
            class="overflow-hidden overflow-y-hidden duration-700 ease-in-out faq-content max-h-0 transition-max-height"
            style="max-height: 0;" id="faq{{ loop.index }}">
            <p class="px-6 pb-4 mt-3 text-lg leading-6 text-gray-800">
              {{ faq.content }}
            </p>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>
  </div>
</div>


<script>
  const faqItems = document.querySelectorAll(".faq-item");
  faqItems.forEach((item) => {
    const header = item.querySelector('.faq-header');
    const content = item.querySelector('.faq-content');
    const arrow = header.querySelector('svg');

    header.addEventListener('click', () => {
      if (content.style.maxHeight !== '0px') {
        content.style.maxHeight = '0px';
        arrow.style.transform = 'rotate(0deg)';
      } else {
        content.style.maxHeight = '2000px';
        arrow.style.transform = 'rotate(180deg)';
      }
    });
  });

  const search = document.querySelector('#faq-search');
  search.addEventListener('input', (e) => {
    const val = e.target.value.toLowerCase();
    const items = document.querySelectorAll('.faq-item');
    items.forEach(item => {
      const title = item.getAttribute('data-title');
      if (title.includes(val)) {
        item.style.display = 'block';
      } else {
        item.style.display = 'none';
      }
    });
  });
</script>

{% endblock content %}