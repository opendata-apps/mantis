{% extends "layout.html" %}
{% block title %}FAQ {% endblock title %}

{% block content %}
<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": [{% for faq in faq_entries %}{
      "@type": "Question",
      "name": "{{ faq.title }}",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "{{ faq.content }}"
      }}{% if not loop.last %},{% endif %}{% endfor %}
    ]
  }
</script>

<div class="container px-8 py-6 mx-auto">
  <div class="flex flex-wrap justify-center">
    <div class="w-full px-4 mb-8 md:w-2/3">
      <input
        class="w-full px-4 py-3 mb-8 text-lg leading-tight text-gray-700 bg-white border border-gray-200 rounded appearance-none focus:outline-none focus:ring focus:ring-green-500"
        id="faq-search" type="text" placeholder="Search FAQ">

      {% set faq_entries = [
      {"title": "Muss ich mich für meine Meldung anmelden oder registrieren?", "content": "Nein, für eine Meldung ist eine Registrierung oder
      Anmeldung nicht nötig."},
      {"title": "Wer kann mitmachen?", "content": "Mitmachen können Kinder, Jugendliche oder Erwachsene, die Interesse
      haben, sich an diesem Forschungsprojekt zu beteiligen."},
      {"title": "Wie kann ich mitmachen?", "content": "Rufen Sie das Meldeformular auf und beginnen Sie mit dem Hochladen eines
      Bildes von einer Gottesanbeterin. Anschließend wählen Sie bitte noch die Position auf der Karte aus. ... Mehr brauchen Sie nicht zu tun."},
      {"title": "Kann ich auch Gottesanbeterinnen außerhalb von Berlin und Brandenburg melden?", "content": "Ja. Der
      Fokus des Projektes liegt zwar auf Nachweisen der Gottesanbeterin in Berlin und Brandenburg aber Meldungen außerhalb von Berlin und Brandenburg sind auch möglich."},
      {"title": "Kann ich auch Beobachtungen aus vorherigen Jahren melden?", "content": "Sehr gerne. Wir freuen uns über jede Meldung. Schauen Sie gerne
      auch Ihre Fotoarchive durch und melden Sie uns Ihre bisherigen Funde."},
      {"title": "Wonach soll ich schauen?", "content": "Jegliche Nachweise der gut getarnten Lauerjägerin sind
      interessant und erwünscht. Besonders würden wir uns über ein Foto von der Gottesanbeterin freuen. "},
      {"title": "Wo soll ich suchen?", "content": "Die Europäische Gottesanbeterin ist eine Wärme und Sonne liebende
      Art. Deswegen sollten Sie in Berlin und Brandenburg vor allem bei sonnigen Hängen, Büschen, Sträuchern und Waldrändern suchen."},
      {"title": "Muss ich etwas unternehmen, wenn ich eine Gottesanbeterin finde?", "content": "Machen Sie bitte ein
      Foto und melden Sie uns Ihren Fund. Dazu geben Sie auf der Karte bitte Ihren Standort an, wo Sie die Gottesanbeterin gefunden haben."},
      {"title": "Was passiert mit meiner Meldung?", "content": "Im Naturkundemuseum Potsdam werden die Meldungen in
      einer Datenbank erfasst."},
      {"title": "Was passiert mit meinen Daten?", "content": "Mit dem neuen Meldeportal können Sie den Fundort direkt in
      der Karte auswählen. Ihre Daten werden nur zur Auswertung, Dokumentation und Absicherung genutzt."},
      {"title": "Das passiert mit meinen Fotos?", "content": "Ihre Fotos dienen ausschließlich der Absicherung des
      Fundes."}
      ] %}
      <div class="space-y-6" id="faq-container">
        {% for faq in faq_entries %}
        <div class="faq-item" data-title="{{ faq.title|lower }}">
          <div
            class="flex items-center justify-between block p-6 transition-all duration-200 ease-in bg-white border border-gray-200 rounded-lg shadow-lg cursor-pointer hover:shadow-xl faq-header"
            data-id="faq{{ loop.index }}">
            <h2
              class="text-2xl font-semibold text-green-800 transition-colors duration-200 ease-in-out hover:text-green-600">
              {{ faq.title }}</h2>
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"
              class="flex-shrink-0 w-6 h-6 transition-transform duration-200 ease-in transform"
              style="transition: transform 0.3s ease;">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
            </svg>
          </div>
          <div
            class="overflow-hidden overflow-y-hidden duration-700 ease-in-out faq-content max-h-0 transition-max-height"
            style="max-height: 0;" id="faq{{ loop.index }}">
            <p class="px-6 pb-4 mt-3 text-lg leading-6 text-gray-800">
              {{ faq.content }}
            </p>
          </div>
        </div>
        {% endfor %}
      </div>

    </div>
  </div>
</div>


<script>
  const faqItems = document.querySelectorAll(".faq-item");
  faqItems.forEach((item) => {
    const header = item.querySelector('.faq-header');
    const content = item.querySelector('.faq-content');
    const arrow = header.querySelector('svg');

    header.addEventListener('click', () => {
      if (content.style.maxHeight !== '0px') {
        content.style.maxHeight = '0px';
        arrow.style.transform = 'rotate(0deg)';
      } else {
        content.style.maxHeight = '2000px';
        arrow.style.transform = 'rotate(180deg)';
      }
    });
  });

  const search = document.querySelector('#faq-search');
  search.addEventListener('input', (e) => {
    const val = e.target.value.toLowerCase();
    const items = document.querySelectorAll('.faq-item');
    items.forEach(item => {
      const title = item.getAttribute('data-title');
      if (title.includes(val)) {
        item.style.display = 'block';
      } else {
        item.style.display = 'none';
      }
    });
  });
</script>

{% endblock content %}