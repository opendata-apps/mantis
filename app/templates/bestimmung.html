{% extends "layout.html" %} {% block meta_keywords %} Gottesanbeterin
Bestimmung, Mantis religiosa Identifikation, Merkmale, Unterscheidung,
Brandenburg, Berlin {% endblock %} {% block page_title %} Gottesanbeterin
Bestimmung | Merkmale & Bestimmungschlüssel {% endblock %} {% block title
%}Bestimmungschlüssel{% endblock title %} {% block head %}
<link
  href="{{ url_for('static', filename='lb/css/lightbox.min.css') }}"
  rel="stylesheet"
/>

{% endblock head %} {% block content %}

<!-- Main Content -->
<div class="container p-6 mx-auto lg:max-w-6xl">
  <section id="meldeformular" class="p-8 mt-8 bg-white rounded-lg shadow-lg">
    <div class="flex flex-col items-center justify-between md:flex-row">
      <div class="mb-6 md:mb-0 md:pr-8">
        <h2 class="flex items-center mb-4 text-3xl font-bold text-gray-800">
          <svg
            class="w-10 h-10 mr-3 text-green-500"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"
            ></path>
          </svg>
          Warum ist die Bestimmung wichtig?
        </h2>
        <p class="text-lg leading-relaxed text-gray-700">
          Die genaue Bestimmung ermöglicht es uns, das Auftreten und die
          Entwicklung der Gottesanbeterin im Jahresverlauf und über verschiedene
          Jahre hinweg zu vergleichen.
        </p>
        <p class="mt-6 text-xl font-bold text-gray-800">Hinweis:</p>
        <ul class="mt-3 ml-6 space-y-2 text-gray-700 list-disc">
          <li class="text-lg">
            Klicken Sie auf ein Vorschaubild für eine vergrößerte Ansicht.
          </li>
          <li class="text-lg">
            Die Farbe des Tieres spielt für die Bestimmung
            <span class="font-bold text-green-600">keine</span> Rolle!
          </li>
        </ul>
      </div>
    </div>
  </section>

  <!-- Bestimmungsschlüssel -->
  <div class="mt-16">
    <div class="mb-10">
      <h2 class="mb-6 text-3xl font-bold text-gray-800">
        Bestimmungsschlüssel
      </h2>
      <div class="h-3 mt-4 bg-gray-200 rounded-full">
        <div
          class="w-1/4 h-3 transition-all duration-300 ease-in-out bg-green-500 rounded-full"
          id="progress-bar"
        ></div>
      </div>
    </div>

    <div class="space-y-10">
      <!-- Step 1 -->
      <div class="p-8 bg-white rounded-lg shadow-md" id="step1">
        <h3 class="mb-6 text-2xl font-semibold text-gray-800">
          1. Oothek oder Insekt?
        </h3>
        <div class="space-y-6">
          <div
            class="p-6 transition duration-300 border border-gray-200 rounded-lg cursor-pointer hover:shadow-md hover:bg-green-100"
            onclick="handleSelection(event, 'oothek')"
          >
            <div class="flex flex-col md:flex-row">
              <div class="pr-4 md:w-2/3">
                <h4 class="mb-3 text-xl font-medium text-gray-700">
                  Option A: Oothek
                </h4>
                <p class="mb-4 text-lg text-gray-600">
                  Charakteristisch geformtes, bräunliches Gebilde (an eine
                  Walnuss erinnernd)
                </p>
              </div>
              <div class="mt-4 md:w-1/3 md:mt-0">
                <a
                  href="{{ url_for('static', filename='images/bestimmung/oothek--gross__an-vegetation.jpg') }}"
                  data-lightbox="oothek"
                  data-title="Bild 1: Oothek an der Vegetation"
                  class="relative block overflow-hidden bg-gray-100 rounded-lg group"
                >
                  <img
                    src="{{ url_for('static', filename='images/bestimmung/oothek--gross__an-vegetation.jpg') }}"
                    alt="Bild 1: Oothek an der Vegetation"
                    class="object-cover w-full h-56 transition-transform duration-300 transform group-hover:scale-110"
                  />
                  <div
                    class="absolute inset-0 flex items-center justify-center transition-opacity duration-300 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100"
                  >
                    <p class="text-lg font-semibold text-white">
                      Bild 1: Oothek an der Vegetation
                    </p>
                  </div>
                </a>
              </div>
            </div>
          </div>
          <div
            class="p-6 transition duration-300 border border-gray-200 rounded-lg cursor-pointer hover:shadow-md hover:bg-green-100"
            onclick="handleSelection(event, null, 2)"
          >
            <h4 class="mb-3 text-xl font-medium text-gray-700">
              Option B: Insekt
            </h4>
            <p class="mb-4 text-lg text-gray-600">
              Insekt mit sechs Beinen, Vorderbeine zu Fangbeinen umgebildet
            </p>
          </div>
        </div>
      </div>

      <!-- Step 2 -->
      <div class="hidden p-8 bg-white rounded-lg shadow-md" id="step2">
        <h3 class="mb-6 text-2xl font-semibold text-gray-800">
          2. Flügel oder flügellos?
        </h3>
        <div class="space-y-6">
          <div
            class="p-6 transition duration-300 border border-gray-200 rounded-lg cursor-pointer hover:shadow-md hover:bg-green-100"
            onclick="handleSelection(event, 'nymphe')"
          >
            <div class="flex flex-col md:flex-row">
              <div class="pr-4 md:w-2/3">
                <h4 class="mb-3 text-xl font-medium text-gray-700">
                  Option A: Flügellos oder Flügelstummel
                </h4>
                <p class="mb-4 text-lg text-gray-600">
                  Nymphe (Larve), junges Tier
                </p>
              </div>
              <div class="mt-4 md:w-1/3 md:mt-0">
                <a
                  href="{{ url_for('static', filename='images/bestimmung/berger-junge-nymphe-ohne-fluegelgross.jpg') }}"
                  data-lightbox="nymphe"
                  data-title="Bild 4: Nymphe"
                  class="relative block overflow-hidden bg-gray-100 rounded-lg group"
                >
                  <img
                    src="{{ url_for('static', filename='images/bestimmung/berger-junge-nymphe-ohne-fluegelgross.jpg') }}"
                    alt="Bild 4: Nymphe"
                    class="object-cover w-full h-56 transition-transform duration-300 transform group-hover:scale-110"
                  />
                  <div
                    class="absolute inset-0 flex items-center justify-center transition-opacity duration-300 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100"
                  >
                    <p class="text-lg font-semibold text-white">
                      Bild 4: Nymphe
                    </p>
                  </div>
                </a>
              </div>
            </div>
          </div>
          <div
            class="p-6 transition duration-300 border border-gray-200 rounded-lg cursor-pointer hover:shadow-md hover:bg-green-100"
            onclick="handleSelection(event, null, 3)"
          >
            <div class="flex flex-col md:flex-row">
              <div class="pr-4 md:w-2/3">
                <h4 class="mb-3 text-xl font-medium text-gray-700">
                  Option B: Vollständig ausgebildete Flügel
                </h4>
                <p class="mb-4 text-lg text-gray-600">Erwachsenes Tier</p>
              </div>
              <div class="mt-4 md:w-1/3 md:mt-0">
                <a
                  href="{{ url_for('static', filename='images/bestimmung/erwachsenes-tier-gross.jpg') }}"
                  data-lightbox="adult"
                  data-title="Bild 6: Erwachsenes Tier"
                  class="relative block overflow-hidden bg-gray-100 rounded-lg group"
                >
                  <img
                    src="{{ url_for('static', filename='images/bestimmung/erwachsenes-tier-gross.jpg') }}"
                    alt="Bild 6: Erwachsenes Tier"
                    class="object-cover w-full h-56 transition-transform duration-300 transform group-hover:scale-110"
                  />
                  <div
                    class="absolute inset-0 flex items-center justify-center transition-opacity duration-300 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100"
                  >
                    <p class="text-lg font-semibold text-white">
                      Bild 6: Erwachsenes Tier
                    </p>
                  </div>
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Step 3 -->
      <div class="hidden p-8 bg-white rounded-lg shadow-md" id="step3">
        <h3 class="mb-6 text-2xl font-semibold text-gray-800">
          3. Männchen oder Weibchen?
        </h3>
        <div class="space-y-6">
          <div
            class="p-6 transition duration-300 border border-gray-200 rounded-lg cursor-pointer hover:shadow-md hover:bg-green-100"
            onclick="handleSelection(event, 'männchen')"
          >
            <div class="flex flex-col md:flex-row">
              <div class="pr-4 md:w-2/3">
                <h4 class="mb-3 text-xl font-medium text-gray-700">
                  Option A: Männchen
                </h4>
                <p class="mb-4 text-lg text-gray-600">
                  Sehr schlankes Tier, Fühler länger als Vorderbrust
                </p>
              </div>
              <div class="mt-4 md:w-1/3 md:mt-0">
                <a
                  href="{{ url_for('static', filename='images/bestimmung/maennchen-adult-gruengross.jpg') }}"
                  data-lightbox="male"
                  data-title="Bild 8: Männchen"
                  class="relative block overflow-hidden bg-gray-100 rounded-lg group"
                >
                  <img
                    src="{{ url_for('static', filename='images/bestimmung/maennchen-adult-gruengross.jpg') }}"
                    alt="Bild 8: Männchen"
                    class="object-cover w-full h-56 transition-transform duration-300 transform group-hover:scale-110"
                  />
                  <div
                    class="absolute inset-0 flex items-center justify-center transition-opacity duration-300 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100"
                  >
                    <p class="text-lg font-semibold text-white">
                      Bild 8: Männchen
                    </p>
                  </div>
                </a>
              </div>
            </div>
          </div>
          <div
            class="p-6 transition duration-300 border border-gray-200 rounded-lg cursor-pointer hover:shadow-md hover:bg-green-100"
            onclick="handleSelection(event, 'weibchen')"
          >
            <div class="flex flex-col md:flex-row">
              <div class="pr-4 md:w-2/3">
                <h4 class="mb-3 text-xl font-medium text-gray-700">
                  Option B: Weibchen
                </h4>
                <p class="mb-4 text-lg text-gray-600">
                  Großes und kräftiges Tier, Fühler kürzer als Vorderbrust
                </p>
              </div>
              <div class="mt-4 md:w-1/3 md:mt-0">
                <a
                  href="{{ url_for('static', filename='images/bestimmung/erwachsenes-weibchen-gross.jpg') }}"
                  data-lightbox="female"
                  data-title="Bild 9: Weibchen"
                  class="relative block overflow-hidden bg-gray-100 rounded-lg group"
                >
                  <img
                    src="{{ url_for('static', filename='images/bestimmung/erwachsenes-weibchen-gross.jpg') }}"
                    alt="Bild 9: Weibchen"
                    class="object-cover w-full h-56 transition-transform duration-300 transform group-hover:scale-110"
                  />
                  <div
                    class="absolute inset-0 flex items-center justify-center transition-opacity duration-300 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100"
                  >
                    <p class="font-semibold text-white">Bild 9: Weibchen</p>
                  </div>
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Result -->
      <div class="hidden p-8 bg-white rounded-lg shadow-md" id="result">
        <h3 class="mb-6 text-2xl font-semibold text-gray-800">Ergebnis</h3>
        <div class="flex flex-col md:flex-row md:space-x-8">
          <div class="w-full mb-6 md:w-1/3 md:mb-0">
            <div
              class="relative overflow-hidden bg-gray-100 rounded-lg shadow-md group"
            >
              <img
                id="result-image"
                src=""
                alt="Identifiziertes Exemplar"
                class="object-cover w-full h-64 transition-transform duration-300 transform md:h-auto group-hover:scale-105"
              />
              <div
                class="absolute inset-0 flex items-center justify-center transition-opacity duration-300 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100"
              >
                <p
                  class="text-lg font-semibold text-white"
                  id="result-image-caption"
                ></p>
              </div>
            </div>
          </div>
          <div class="w-full md:w-2/3">
            <div class="p-6 rounded-lg shadow-sm bg-green-50">
              <p
                class="mb-4 text-2xl font-bold text-green-800"
                id="result-text"
              ></p>
              <p
                class="mb-6 text-lg leading-relaxed text-gray-700"
                id="result-description"
              ></p>
              <div
                class="flex flex-col sm:flex-row sm:justify-between sm:items-center"
              >
                <a
                  id="learn-more-link"
                  href="#"
                  target="_blank"
                  class="inline-block px-6 py-3 text-white transition duration-300 bg-green-500 rounded-lg shadow-md hover:bg-green-600 hover:shadow-lg"
                >
                  Mehr erfahren
                </a>
                <button
                  class="px-6 py-3 mt-4 text-green-700 transition bg-white border-2 border-green-500 rounded-lg sm:mt-0 hover:bg-green-100 hover:text-green-800"
                  onclick="resetSteps()"
                >
                  Neu starten
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Quick Reference Guide -->
  <div class="p-6 mt-12 rounded-lg shadow-lg bg-green-50">
    <h3 class="mb-4 text-2xl font-bold text-gray-800">Schnellübersicht</h3>
    <div class="grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4">
      <div class="p-4 bg-white rounded-lg shadow">
        <h4 class="mb-2 text-lg font-semibold text-green-600">Oothek</h4>
        <p>Bräunliches, walnussförmiges Gebilde</p>
      </div>
      <div class="p-4 bg-white rounded-lg shadow">
        <h4 class="mb-2 text-lg font-semibold text-green-600">Nymphe</h4>
        <p>Flügellos oder mit Flügelstummeln</p>
      </div>
      <div class="p-4 bg-white rounded-lg shadow">
        <h4 class="mb-2 text-lg font-semibold text-green-600">Männchen</h4>
        <p>Schlank, lange Fühler</p>
      </div>
      <div class="p-4 bg-white rounded-lg shadow">
        <h4 class="mb-2 text-lg font-semibold text-green-600">Weibchen</h4>
        <p>Kräftig, kurze Fühler</p>
      </div>
    </div>
  </div>
</div>

<script src="{{ url_for('static', filename='lb/jquery-3.3.1.slim.min.js')}}"></script>
<script src="{{ url_for('static', filename='lb/js/lightbox-plus-jquery.js')}}"></script>

<script>
  let currentStep = 1;
  const totalSteps = 3;

  function handleSelection(event, option, nextStep) {
    // Check if the click target is an image or its container
    if (
      event.target.tagName === "IMG" ||
      event.target.closest("a[data-lightbox]")
    ) {
      // If it's an image, don't do anything (let lightbox handle it)
      return;
    }

    if (option) {
      selectOption(option);
    } else if (nextStep) {
      showStep(nextStep);
    }
  }

  function showStep(step) {
    document
      .querySelectorAll('[id^="step"]')
      .forEach((el) => el.classList.add("hidden"));
    document.getElementById(`step${step}`).classList.remove("hidden");
    document.getElementById("result").classList.add("hidden");
    currentStep = step;
    updateProgressBar();
  }

  function selectOption(option) {
    const resultImage = document.getElementById("result-image");
    const resultImageCaption = document.getElementById("result-image-caption");
    const resultText = document.getElementById("result-text");
    const resultDescription = document.getElementById("result-description");
    const learnMoreLink = document.getElementById("learn-more-link");

    let imageSrc, imageCaption, title, description, learnMoreUrl;

    switch (option) {
      case "oothek":
        imageSrc =
          "{{ url_for('static', filename='images/bestimmung/oothek--gross__an-vegetation.jpg') }}";
        imageCaption = "Oothek an der Vegetation";
        title = "Sie haben eine Oothek identifiziert";
        description =
          "Die Oothek ist das Eigelege der Gottesanbeterin. Sie hat eine charakteristische braune, walnussähnliche Form und wird oft an Pflanzen oder anderen Strukturen befestigt.";
        learnMoreUrl = "https://example.com/oothek-info";
        break;
      case "nymphe":
        imageSrc =
          "{{ url_for('static', filename='images/bestimmung/berger-junge-nymphe-ohne-fluegelgross.jpg') }}";
        imageCaption = "Junge Nymphe ohne Flügel";
        title = "Sie haben eine Nymphe identifiziert";
        description =
          "Nymphen sind junge Gottesanbeterinnen ohne vollständig entwickelte Flügel. Sie häuten sich mehrmals, bevor sie erwachsen werden. Nymphen ähneln bereits den erwachsenen Tieren, sind aber kleiner und flügellos.";
        learnMoreUrl = "https://example.com/nymphe-info";
        break;
      case "männchen":
        imageSrc =
          "{{ url_for('static', filename='images/bestimmung/maennchen-adult-gruengross.jpg') }}";
        imageCaption = "Erwachsenes Männchen";
        title = "Sie haben ein Männchen identifiziert";
        description =
          "Männliche Gottesanbeterinnen sind schlanker und haben längere Fühler als die Weibchen. Sie sind in der Regel kleiner als die Weibchen und haben einen schlankeren Hinterleib. Ihre Flügel bedecken oft den gesamten Hinterleib.";
        learnMoreUrl = "https://example.com/maennchen-info";
        break;
      case "weibchen":
        imageSrc =
          "{{ url_for('static', filename='images/bestimmung/erwachsenes-weibchen-gross.jpg') }}";
        imageCaption = "Erwachsenes Weibchen";
        title = "Sie haben ein Weibchen identifiziert";
        description =
          "Weibliche Gottesanbeterinnen sind größer und kräftiger als die Männchen. Sie haben kürzere Fühler und einen breiteren Hinterleib. Ihre Flügel bedecken oft nicht den gesamten Hinterleib, besonders wenn sie trächtig sind.";
        learnMoreUrl = "https://example.com/weibchen-info";
        break;
    }

    resultImage.src = imageSrc;
    resultImage.alt = `Bild: ${option}`;
    resultImageCaption.textContent = imageCaption;
    resultText.textContent = title;
    resultDescription.textContent = description;
    learnMoreLink.href = learnMoreUrl;

    document
      .querySelectorAll('[id^="step"]')
      .forEach((el) => el.classList.add("hidden"));
    document.getElementById("result").classList.remove("hidden");
    updateProgressBar(100);
  }

  function resetSteps() {
    currentStep = 1;
    document.getElementById("result-text").textContent = "";
    document.getElementById("result-description").textContent = "";
    document.getElementById("result-image").src = "";
    document.getElementById("result-image-caption").textContent = "";
    showStep(1);
    updateProgressBar();
  }

  function updateProgressBar(forcedPercentage = null) {
    const percentage =
      forcedPercentage !== null
        ? forcedPercentage
        : (currentStep / totalSteps) * 100;
    document.getElementById("progress-bar").style.width = `${percentage}%`;
  }

  // Initialize
  showStep(1);
</script>

{% endblock content %}
